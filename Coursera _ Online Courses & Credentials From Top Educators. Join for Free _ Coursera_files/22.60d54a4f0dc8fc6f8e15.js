(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{"7iRV":function(module,e,n){"use strict";n.r(e);var t,r,o,a=n("3tO9"),i=n.n(a),s=n("VkAN"),l=n.n(s),c=n("pVnL"),d=n.n(c),u=n("VbXa"),p=n.n(u),m=n("q1tI"),g=n("UYTu"),h=n("17x9"),f=n.n(h),v=n("MnCE"),k=n("HOoY"),b=n("kvW3"),y=n("Wjkg"),E=n("l1ss"),C=n("sQ/U"),w=n("xJyF"),R=n("eJRr"),D=n("CsdX"),B=Object(v.i)((function(e){return m.createElement("svg",d()({viewBox:"0 0 167 66",style:{width:"100%"},xmlns:"http://www.w3.org/2000/svg"},e),t||(t=m.createElement("title",null,"Shapes")),r||(r=m.createElement("defs",null)),o||(o=m.createElement("g",{id:"Artboard",stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd",transform:"translate(-35.000000, -33.000000)",opacity:"0.1"},m.createElement("g",{id:"Banner",transform:"translate(35.000000, 33.000000)",stroke:"#000000",strokeWidth:"6"},m.createElement("g",{id:"sessionnotificationbg"},m.createElement("g",{id:"shapes"},m.createElement("g",{transform:"translate(-29.000000, -21.000000)"},m.createElement("g",{id:"Clock",transform:"translate(155.049449, 36.684704)"},m.createElement("path",{d:"M37.9396098,17.4698049 C37.9396098,28.774791 28.7750662,37.9396098 17.4698049,37.9396098 C6.16454361,37.9396098 -3,28.774791 -3,17.4698049 C-3,6.16481885 6.16454361,-3 17.4698049,-3 C28.7750662,-3 37.9396098,6.16481885 37.9396098,17.4698049 Z",id:"Stroke-1"}),m.createElement("polyline",{id:"Stroke-3",points:"18.1685971 4.19275318 18.1685971 17.4698049 9.08429855 17.4698049"})),m.createElement("rect",{id:"Rectangle-path",transform:"translate(31.500000, 30.204937) rotate(201.000000) translate(-31.500000, -30.204937) ",x:"7",y:"8",width:"49",height:"44.4098749"}),m.createElement("rect",{id:"Rectangle-path",transform:"translate(82.000000, 79.000000) rotate(157.000000) translate(-82.000000, -79.000000) ",x:"71",y:"68",width:"22",height:"22"}),m.createElement("circle",{id:"Oval",cx:"103.5",cy:"28.5",r:"7.5"}),m.createElement("path",{d:"M118.5,59.5 L129.5,44.5",id:"Line",strokeLinecap:"square"}))))))))}));B.displayName="GDPRArchSVG";var S=B,P="dismissedGDPRBanner",O=["coursera","strawberry","peach","kiwi","sea","blueberry","grape"],x=["grape"],G=n("TP7S"),N=n.n(G),gdprUtils_getGradient=function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],t=e&&n?x:O;return t[Math.floor(Math.random()*t.length)]},A=n("ti7j"),U=n("PStO"),I=n("12P2"),M=function(e){function NotificationPreferences(){return e.apply(this,arguments)||this}return p()(NotificationPreferences,e),NotificationPreferences}(n("HlCP").a);M.RESOURCE_NAME="notificationPreferences.v2";var V,j,T=M,W=n("sOkY"),Y=n("W++m"),L=n.n(Y);n.d(e,"BaseComponent",(function(){return J}));var H=R.StyleSheet.create({GDPRBanner:{padding:D.k.sm,textAlign:"center",backgroundImage:"linear-gradient(90deg, ".concat(D.h.sea.start,", ").concat(D.h.sea.end,")"),position:"relative"},textWrapper:{display:"inline-block",verticalAlign:"middle",fontWeight:600,margin:0},selectWrapper:{width:100,display:"inline-block",verticalAlign:"middle",margin:"".concat(D.k.xs," ").concat(D.k.md)},selectComponent:{backgroundColor:"#fff",border:"1px solid #ccc",color:"#666",cursor:"default",borderRadius:0,borderSpacing:0,borderCollapse:"separate",height:"36px",lineHeight:"36px",outline:"none",position:"relative",padding:"0 7px"},disabledOption:{display:"none"}}),GDPRBanner_generateBannerText=function(e){var n=[L()("Please stay with us! Opt-in to let us know you’d like to keep receiving course recommendations via email from Coursera."),L()("Don’t lose touch! Opt-in today to continue receiving emails with course recommendations and news from Coursera."),L()("Stay on track — the deadline is coming soon! Opt-in to continue receiving updates from Coursera."),L()("Don’t miss out. You must opt-in to continue receiving updates from Coursera.")],t=[L()("Don’t lose touch! Opt-in for updates on how Coursera for Business can help you transform your workforce.")],r=e?t:n,o=e?["Don’t lose touch! Opt-in for updates on how Coursera for Business can help you transform your workforce."]:["Please stay with us! Opt-in to let us know you’d like to keep receiving course recommendations via email from Coursera.","Don’t lose touch! Opt-in today to continue receiving emails with course recommendations and news from Coursera.","Stay on track — the deadline is coming soon! Opt-in to continue receiving updates from Coursera.","Don’t miss out. You must opt-in to continue receiving updates from Coursera."],a=Math.floor(Math.random()*r.length);return{translated:r[a],untranslated:o[a]}},J=function(e){function GDPRBanner(n){var t;(t=e.call(this,n)||this).updateParentClass=function(){var e=t.props,n=e.addParentHeightClass,r=e.shouldRender,o=t.state.selectedValue;r&&"no"!==o&&(null==n||n("with-gdpr-banner"))},t.hideBanner=function(){var e=t.props.removeParentHeightClass;t.setState((function(){return{isDismissed:!0}})),null==e||e("with-gdpr-banner")},t.selectOnChange=function(e){var n,r=t.state,o=r.untranslatedBannerText,a=r.color,i=t.context._eventData,s=null==e?void 0:null===(n=e.target)||void 0===n?void 0:n.value;t.setState((function(){return{selectedValue:s}})),k.a.trackComponent(i,{selectedValue:s,color:a,bannerText:o},"gdpr_marketing_dropdown","select"),"no"===s?(t.hideBanner(),y.a.set(P,!0)):(setTimeout(t.hideBanner,8e3),t.updateNotifications())},t.updateNotifications=function(){var e=t.props,n=e.naptime,r=e.notificationPreferences,o=e.isEnterprise,a=e.isAdmin;if(r){var i,s,l,c=JSON.parse(JSON.stringify(r));if(!r||o||a){if(r&&o&&a){var d;c.global="ENABLED",c.enterpriseMarketing=null!==(d=c.enterpriseMarketing)&&void 0!==d?d:{},c.enterpriseMarketing.email="SUBSCRIBED"}}else c.global="ENABLED",c.volunteer=null!==(i=c.volunteer)&&void 0!==i?i:{},c.volunteer.email="SUBSCRIBED",c.promotions=null!==(s=c.promotions)&&void 0!==s?s:{},c.promotions.email="SUBSCRIBED",c.recommendations=null!==(l=c.recommendations)&&void 0!==l?l:{},c.recommendations.email="SUBSCRIBED";n.executeMutation(T.update(C.a.get().id,c))}};var r=n.isAdmin,o=n.isEnterprise,a=GDPRBanner_generateBannerText(o),i=a.translated,s=a.untranslated,l=gdprUtils_getGradient(o&&r);return t.state={isDismissed:!1,selectedValue:void 0,color:l,bannerText:i,untranslatedBannerText:s},t}p()(GDPRBanner,e);var n=GDPRBanner.prototype;return n.componentDidMount=function(){this.updateParentClass()},n.render=function(){var e=this.props.shouldRender,n=this.state,t=n.isDismissed,r=n.selectedValue,o=n.bannerText,a=n.untranslatedBannerText,i=n.color;return!e||t?V||(V=m.createElement("span",null)):m.createElement(W.a,d()({},Object(D.d)("rc-GDPRBanner",H.GDPRBanner),{trackingName:"gdpr_marketing_banner",withVisibilityTracking:!0,data:{bannerText:a,color:i},style:{backgroundImage:"linear-gradient(90deg, ".concat(D.h[i].start,", ").concat(D.h[i].end,")")}}),m.createElement(S,{className:"GDPRShapesSVG",style:{maxWidth:300,maxHeight:"100%",position:"absolute",left:0,top:0}}),m.createElement("label",d()({htmlFor:"GDPRDropdown"},Object(D.d)(H.textWrapper)),"yes"===r?m.createElement(b.b,{message:L()("Great! You’re signed up. You can manage your communication preferences in your {link}. Thanks for your interest in Coursera, and good luck with your courses."),link:m.createElement("a",{href:"/account-settings"},L()("Account Settings"))}):o),"yes"!==r&&m.createElement("div",Object(D.d)(H.selectWrapper),m.createElement("select",d()({},Object(D.d)("rc-GDPRDropdown",H.selectComponent),{id:"GDPRdropdown",onChange:this.selectOnChange,required:!0}),m.createElement("option",d()({},Object(D.d)(H.disabledOption),{key:"GDPRdropdown~placeholder",value:"",disabled:!0,hidden:!0,selected:!0}),L()("Select...")),m.createElement("option",{key:"GDPRdropdown~yes",value:"yes"},L()("Yes")),m.createElement("option",{key:"GDPRdropdown~no",value:"no"},L()("Not now")))))},GDPRBanner}(m.Component);J.contextTypes={_eventData:f.a.object};var q=Object(g.a)(j||(j=l()(["\n  query GdprMembershipQuery($userId: String!) {\n    EnterpriseAdminRolesV1Resource {\n      byUser(userId: $userId) {\n        elements {\n          id\n          managedLevelScope\n          role\n          thirdPartyOrganizationId\n          programId\n        }\n      }\n    }\n  }\n"]))),GDPRBanner_gdprCheck=function(){return Boolean(A.a.get("enableGDPR")&&C.a.isAuthenticatedUser()&&!y.a.get(P))};e.default=Object(v.b)(E.a,Object(w.a)(q,{skip:function(){return!GDPRBanner_gdprCheck()},options:function(){return{variables:{userId:C.a.get().id.toString()}}},props:function(e){var n,t,r,o=e.data;return{enterpriseAdminRoles:(null!==(n=null==o?void 0:null===(t=o.EnterpriseAdminRolesV1Resource)||void 0===t?void 0:null===(r=t.byUser)||void 0===r?void 0:r.elements)&&void 0!==n?n:[]).filter(Boolean).map((function(e){return new I.a(e)}))}}}),U.b.createContainer((function(){return{notificationPreferences:GDPRBanner_gdprCheck()?T.get(C.a.get().id,{}):void 0}})),Object(v.n)((function(e){var n=e.notificationPreferences,t=e.enterpriseAdminRoles,r=e.programs,o=!!(t||[]).length,a=o||!!(r||[]).length,s=function(e){var n,t,r,o=arguments.length>1&&void 0!==arguments[1]&&arguments[1],a=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=!!e&&"UNSUBSCRIBED"===(null===(n=e.volunteer)||void 0===n?void 0:n.email)&&"UNSUBSCRIBED"===(null===(t=e.promotions)||void 0===t?void 0:t.email)&&"UNSUBSCRIBED"===(null===(r=e.recommendations)||void 0===r?void 0:r.email),s=!!e&&N()(e.enterpriseMarketing)||!!e&&!!e.enterpriseMarketing&&"UNSUBSCRIBED"===e.enterpriseMarketing.email;return a&&o?s:!a&&!o&&i}(n,a,o);return i()(i()({},e),{},{isEnterprise:a,isAdmin:o,shouldRender:s})})))(J)}}]);
//# sourceMappingURL=22.60d54a4f0dc8fc6f8e15.js.map